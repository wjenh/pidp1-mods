
      TYPE 23 DRUM DIAGNOSTICS                                            Page 1


    1                   TYPE 23 DRUM DIAGNOSTICS
    2                   / drum
    3       724074               eem=724074
    4 00004 340676               dzm t4
    5 00005 340677               dzm cl
    6 00006 340701               dzm cnt
    7 00007 340700               dzm il
    8 00010 340703               dzm wc
    9                   
   10       720061               dia=720061
   11       722061               dba=722061
   12       720062               dwc=720062
   13       720063               dcl=720063
   14       722062               dra=722062
   15                   
   16                   define  count a,b
   17                           idx a
   18                           sza
   19                           jmp b
   20                           term
   21                   
   22                   define  swap
   23                           rcl 9s
   24                           rcl 9s
   25                           term
   26                   
   27                   define   busy a
   28                            cks
   29                            rir 1
   30                            spi
   31                            jmp a
   32                            term
   33                   
   34                   define   bank
   35                            lat
   36                            and (770000
   37                            sza i
   38                            hlt
   39                            dac cl
   40                            term
   41                   
   42                   define   update a
   43                            lac a
   44                            add (1001
   45                            dac a
   46                            term
   47                   
   48                   define   error
   49                            dra
   50                            dio t4
   51                            spi
   52                            jsp err
   53                            term
   54                   
   55                   define   space
   56                            cli
   57                            tyo

      TYPE 23 DRUM DIAGNOSTICS                                            Page 2


   58                            term
   59                   
   60                   define   return
   61                            lio (77
   62                            tyo
   63                            term
   64                   
   65                   define     typred
   66                              lio (35
   67                              tyo
   68                              term
   69                   
   70                   define     black
   71                              lio (34
   72                              tyo
   73                              term
   74                   
   75                   define     move a,B
   76                              lac a
   77                              dac B
   78                              term
   79                   
   80                   define     movec a,B
   81                              lac a
   82                              and (7777
   83                              sza i
   84                              ior (10000
   85                              cma
   86                              dac B
   87                              term
   88                   
   89                   define     fieldr
   90                              lac il
   91                              add (10000
   92                              dac il
   93                              term
   94                   
   95                   define     fieldw
   96                              lac wc
   97                              add (10000
   98                              dac wc
   99                              term
  100                   
  101                   /drum -1
  102                   
  103 00100             100/
  104 00100 600301      beg,   jmp ll
  105 00101 600171             jmp sta
  106 00102 720160      stc,   iot 160			/ wje - enable sbs16 via dynamic IOT 60
  107 00103 720056             iot 56			/clear break system
  108 00104 720055             iot 55			/Enter seq mode
  109 00105 720053             iot 53			/clear channels
  110 00106 720551             iot 551
  111 00107 724074             iot 4074			/set ext mode
  112                   
  113 00110 340702             dzm tem			/store jsp in break
  114 00111 220704             lio (jsp sc2

      TYPE 23 DRUM DIAGNOSTICS                                            Page 3


  115 00112 330702             dio i tem
  116 00113 440702             idx tem
  117 00114 520705             sas (100
  118 00115 600112             jmp .-3
  119                   
  120 00116 340702      sc1,   dzm tem
  121 00117 200706             lac (700000
  122 00120 240674             dac t2
  123 00121 220702             lio tem
  124 00122 722061             dba
  125                          count t2,.
      00123 440674
      00124 640100
      00125 600123
  126 00126 720054             iot 54
  127 00127 200707             lac (flexo dba			/no seq break
  128                          return
      00130 220710
      00131 730003
  129 00132 170541             jda tya
  130 00133 600102             jmp stc
  131                   
  132 00134 720054      sc2,   iot 54
  133 00135 020711             and (7777
  134 00136 500712             sad (30
  135 00137 600154             jmp sc3
  136 00140 240676             dac t4			/seq to wrong channel
  137 00141 200713             lac (flexo seq
  138                          return
      00142 220710
      00143 730003
  139 00144 170541             jda tya
  140                          space
      00145 764000
      00146 730003
  141                   
  142 00147 710003             law i 3
  143 00150 400676             add t4
  144 00151 020710             and (77
  145 00152 170646             jda opt			/brint pc storage
  146 00153 600102             jmp stc
  147                   
  148 00154 720056      sc3,   iot 56
  149 00155 722062             dra
  150 00156 320676             dio t4
  151 00157 722062             dra
  152                          swap
      00160 663777
      00161 663777
  153 00162 520676             sas t4			/ok if diffirent
  154 00163 600171             jmp sta
  155                   
  156                          return
      00164 220710
      00165 730003
  157 00166 200714             lac (flexo dra
  158 00167 170541             jda tya

      TYPE 23 DRUM DIAGNOSTICS                                            Page 4


  159 00170 600102             jmp stc			/dra failed
  160                   
  161 00171 724074      sta,   eem			/enter extend mode
  162 00172 340702             dzm tem
  163 00173 340674             dzm t2
  164 00174 340675             dzm t3
  165 00175 760207             cla -opr clf 7
  166 00176 240700             dac il
  167                          bank
      00177 762200
      00200 020715
      00201 650100
      00202 760400
      00203 240677
  168 00204 340703             dzm wc
  169 00205 340701             dzm cnt			/initialize program
  170                   
  171 00206 620514      st1,   jsp cou			/load core with counter
  172 00207 760016             stf 6
  173 00210 620402             jsp drm			/write
  174                   
  175                   st2,   error
      00211 722062
      00212 320676
      00213 642000
      00214 620555
  176                          busy st2
      00215 720033
      00216 672001
      00217 642000
      00220 600211
  177 00221 620426             jsp com			/complement pattern
  178                          fieldw
      00222 200703
      00223 400716
      00224 240703
  179 00225 760015             stf 5
  180 00226 620402             jsp drm			/read n, write n+1
  181                   
  182                   st3,   error
      00227 722062
      00230 320676
      00231 642000
      00232 620555
  183                          busy st3
      00233 720033
      00234 672001
      00235 642000
      00236 600227
  184 00237 760007             clf 7
  185 00240 620447             jsp chk			/check core for count
  186                   
  187 00241 760015             stf 5
  188                          fieldr
      00242 200700
      00243 400716
      00244 240700

      TYPE 23 DRUM DIAGNOSTICS                                            Page 5


  189 00245 760014             stf 4
  190 00246 620402             jsp drm			/read n+1
  191                   foo,   error
      00247 722062
      00250 320676
      00251 642000
      00252 620555
  192                          busy foo
      00253 720033
      00254 672001
      00255 642000
      00256 600247
  193 00257 620447             jsp chk			/check comp count
  194                          update cnt
      00260 200701
      00261 400717
      00262 240701
  195 00263 760007             clf 7
  196                   
  197 00264 717777      st4,   law i 7777
  198 00265 020700             and il
  199 00266 520720             sas (370000
  200 00267 600206             jmp st1
  201                   
  202                          return
      00270 220710
      00271 730003
  203 00272 200721             lac (flexo all
  204 00273 170541             jda tya
  205 00274 200722             lac (flexo ok
  206 00275 170541             jda tya
  207                          return
      00276 220710
      00277 730003
  208 00300 760400             hlt
  209                   
  210 00301 724074      ll,    eem
  211 00302 760007             clf 7
  212 00303 340701             dzm cnt
  213 00304 340703             dzm wc
  214 00305 340700             dzm il
  215                          bank
      00306 762200
      00307 020715
      00310 650100
      00311 760400
      00312 240677
  216 00313 620514             jsp cou			/load core with count
  217                   
  218 00314 760016             stf 6
  219 00315 620402             jsp drm			/write core
  220                   
  221                   
  222                   xk1,   error
      00316 722062
      00317 320676
      00320 642000

      TYPE 23 DRUM DIAGNOSTICS                                            Page 6


      00321 620555
  223                          busy xk1
      00322 720033
      00323 672001
      00324 642000
      00325 600316
  224 00326 620426             jsp com
  225 00327 760006             clf 6			/clear write
  226 00330 760015             stf 5			/set read
  227                   
  228 00331 440703      xk3,   idx wc			/inc word count, now 1
  229 00332 500723             sad (4001
  230 00333 600347             jmp xk4
  231                   
  232 00334 620402             jsp drm			/read, same addrs as last write
  233                   xk2,   error
      00335 722062
      00336 320676
      00337 642000
      00340 620555
  234                          busy xk2
      00341 720033
      00342 672001
      00343 642000
      00344 600335
  235 00345 620447             jsp chk			/check for errors
  236 00346 600331             jmp xk3
  237                   
  238 00347 340700      xk4,   dzm il			/test core location
  239 00350 700001             law 1
  240 00351 240703             dac wc
  241 00352 620426             jsp com			/comp core
  242 00353 440677      xk6,   idx cl
  243 00354 020711             and (7777
  244 00355 500711             sad (7777			/test for last
  245 00356 600102             jmp stc
  246                   
  247 00357 620402             jsp drm			/read 1 word
  248                   xk5,   error
      00360 722062
      00361 320676
      00362 642000
      00363 620555
  249                          busy xk5
      00364 720033
      00365 672001
      00366 642000
      00367 600360
  250                   
  251 00370 200701             lac cnt
  252                   /wje       sad i cnt			/test for error
  253 00371 510677             sad i cl			/test for error
  254 00372 600353             jmp xk6
  255                   
  256 00373 200724             lac (flexo cl
  257                          return
      00374 220710

      TYPE 23 DRUM DIAGNOSTICS                                            Page 7


      00375 730003
  258 00376 170541             jda tya
  259 00377 200677             lac cl
  260 00400 170646             jda opt
  261 00401 600353             jmp xk6			/core error
  262                   
  263 00402 260425      drm,   dap dr			/drum subroutine
  264                          busy drm 1
      00403 720033
      00404 672001
      00405 642000
      00406 600403
  265 00407 200700             lac il
  266 00410 640005             szf 5
  267 00411 040725             ior (400000
  268                          swap
      00412 663777
      00413 663777
  269 00414 720061             dia			/drum initial address
  270                   
  271 00415 200703             lac wc
  272 00416 640006             szf 6			/set for write
  273 00417 040725             ior (400000
  274                          swap
      00420 663777
      00421 663777
  275 00422 720062             dwc			/drum word count
  276 00423 220677             lio cl
  277 00424 720063             dcl
  278 00425 600425      dr,    jmp .
  279                   
  280 00426 260446      com,   dap cm2			/complement core
  281                          movec wc,tem
      00427 200703
      00430 020711
      00431 650100
      00432 040716
      00433 761000
      00434 240702
  282                          move cl,t2
      00435 200677
      00436 240674
  283 00437 210674      cm1,   lac i t2
  284 00440 761000             cma
  285 00441 250674             dac i t2
  286 00442 440674             idx t2
  287                          count tem,cm1
      00443 440702
      00444 640100
      00445 600437
  288 00446 600446      cm2,   jmp .
  289                   
  290 00447 260506      chk,   dap ck2			/check core
  291                          movec wc,tem
      00450 200703
      00451 020711
      00452 650100

      TYPE 23 DRUM DIAGNOSTICS                                            Page 8


      00453 040716
      00454 761000
      00455 240702
  292                          move cl,t2
      00456 200677
      00457 240674
  293                          move cnt,t3
      00460 200701
      00461 240675
  294                   
  295 00462 210674      ck1,   lac i t2
  296 00463 640004             szf 4
  297 00464 761000             cma
  298 00465 520675             sas t3
  299 00466 620606             jsp er			/error routine
  300 00467 440674             idx t2
  301                          update t3
      00470 200675
      00471 400717
      00472 240675
  302                          count tem,ck1
      00473 440702
      00474 640100
      00475 600462
  303                   
  304                   /memory matched test pattern
  305 00476 707777             law 7777
  306 00477 020703             and wc
  307 00500 650100             sza i
  308 00501 600506             jmp ck2
  309 00502 210674             lac i t2
  310 00503 640004             szf 4
  311 00504 761000             cma
  312 00505 520675             sas t3
  313 00506 600506      ck2,   jmp .
  314 00507 200726             lac (flexo wce
  315 00510 170541             jda tya
  316                          return
      00511 220710
      00512 730003
  317 00513 600506             jmp ck2
  318                   
  319 00514 260540      cou,   dap cu2			/core counter
  320                          movec wc,tem
      00515 200703
      00516 020711
      00517 650100
      00520 040716
      00521 761000
      00522 240702
  321                          move cl,t2
      00523 200677
      00524 240674
  322                          move cnt,t3
      00525 200701
      00526 240675
  323 00527 200675      cu,    lac t3

      TYPE 23 DRUM DIAGNOSTICS                                            Page 9


  324 00530 250674             dac i t2
  325 00531 440674             idx t2
  326                          update t3
      00532 200675
      00533 400717
      00534 240675
  327                          count tem,cu
      00535 440702
      00536 640100
      00537 600527
  328 00540 600540      cu2,  jmp .
  329                   
  330 00541 000000      tya,   0			/type alpha
  331 00542 260554             dap ta
  332 00543 200541             lac tya
  333 00544 663077             rcl 77
  334 00545 730003             tyo
  335 00546 663077             rcl 77
  336 00547 730003             tyo
  337 00550 663077             rcl 77
  338 00551 730003             tyo
  339                          space
      00552 764000
      00553 730003
  340 00554 600554      ta,    jmp .
  341                   
  342                   
  343 00555 260605      err,   dap er2			/Error printer
  344 00556 640010             szs 10
  345 00557 600605             jmp er2			/reject errors
  346                          return
      00560 220710
      00561 730003
  347                   
  348 00562 220676             lio t4
  349 00563 662001             ril 1
  350 00564 200727             lac   (flexo par
  351 00565 642000             spi
  352 00566 170541             jda tya			/print par
  353                   
  354 00567 220676             lio t4
  355 00570 662003             ril 3
  356 00571 200730             lac (flexo tim
  357 00572 642000             spi
  358 00573 170541             jda  tya			/print tim
  359                   
  360 00574 200731             lac   (flexo rd
  361 00575 640005             szf   5
  362 00576 170541             jda tya
  363 00577 200732             lac (flexo wr
  364 00600 640006             szf 6
  365 00601 170541             jda tya			/print read,write
  366                   
  367 00602 200676             lac t4
  368 00603 020733             and (77777
  369 00604 170646             jda opt
  370 00605 600605      er2,   jmp .			/print drum counter , exit

      TYPE 23 DRUM DIAGNOSTICS                                           Page 10


  371                   
  372 00606 260645      er,    dap ee			/data error printer
  373 00607 640010             szs 10
  374 00610 600645             jmp ee
  375                          return
      00611 220710
      00612 730003
  376 00613 200674             lac t2
  377 00614 170646             jda opt			/print mem address
  378                          space
      00615 764000
      00616 730003
  379 00617 200675            lac t3
  380 00620 640004            szf 4
  381 00621 761000            cma
  382 00622 170646            jda opt			/print correct word
  383                         space
      00623 764000
      00624 730003
  384                   
  385                         typred
      00625 220734
      00626 730003
  386 00627 210674            lac i t2
  387 00630 170646            jda opt			/pr1nt error word
  388                         space
      00631 764000
      00632 730003
  389                         black
      00633 220735
      00634 730003
  390                   
  391 00635 717777            law i 7777
  392 00636 020700            and il
  393 00637 661077            ral 77
  394 00640 170646            jda opt			/print field
  395                         space
      00641 764000
      00642 730003
  396                   
  397 00643 200703            lac wc
  398 00644 170646            jda opt
  399 00645 600645      ee,   jmp .			/print word count
  400                   
  401                   /octal print subroutine __ revised 2 june 62
  402                   /unsigned,   leading zero eliminating. Call: number in ac,   jda opt
  403                   
  404 00646 000000      opt,  0
  405 00647 260672            dap opx
  406 00650 710006            law i 6
  407 00651 240673            dac op2
  408 00652 760011            stf 1
  409 00653 650001      opi,  szf i 1
  410 00654 730003      opo,  tyo
  411 00655 220646            lio opt
  412 00656 760200            cla
  413 00657 663007            rcl 3s

      TYPE 23 DRUM DIAGNOSTICS                                           Page 11


  414 00660 320646            dio opt
  415 00661 640100            sza
  416 00662 760001            clf 1
  417 00663 650100            sza i
  418 00664 700020            law 20
  419 00665 663777            rcl 9s
  420 00666 663777            rcl 9s
  421 00667 460673            isp op2
  422 00670 600653            jmp opi
  423 00671 100654            xct opo
  424 00672 600672      opx,  jmp   .
  425                   
  426 00673 000000      op2,  0
  427                   
  428 00674 000000      t2, 0
  429 00675 000000      t3, 0
  430 00676 000000      t4, 0
  431 00677 000000      cl, 0
  432 00700 000000      il, 0
  433 00701 000000      cnt, 0
  434 00702 000000      tem, 0
  435 00703 000000      wc, 0
  436                   
  437 00704 620134      constants
      00705 000100
      00706 700000
      00707 646261
      00710 000077
      00711 007777
      00712 000030
      00713 226550
      00714 645161
      00715 770000
      00716 010000
      00717 001001
      00720 370000
      00721 614343
      00722 464200
      00723 004001
      00724 634300
      00725 400000
      00726 266365
      00727 476151
      00730 237144
      00731 516400
      00732 265100
      00733 077777
      00734 000035
      00735 000034
  438       000100      start 100

      No errors detected
