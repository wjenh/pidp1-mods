
      A SPECIAL LOADER TO LOAD OR STORE PROGRAMS TO THE DRUM              Page 1


    1                   A SPECIAL LOADER TO LOAD OR STORE PROGRAMS TO THE DRUM
    2                   
    3       720061      dia=720061
    4       720062      dwc=720062
    5       720063      dcl=720063
    6                   
    7       760020      lia=760020
    8       760040      lai=760040
    9       760060      lsw=760060
   10                   
   11                   / Assemble with -r or it will fail
   12                   / This is an extended version of the regular drumloader.
   13                   / Set sense switch 1 on for write to drum 0 for read from drum.
   14                   / The high 6 test word switches, 0-5, select the drum track, 0-37, to use.
   15                   / Switch 0 is ignored.
   16                   / If the low 12 bits of the test word switches are non-zero when storing they will be
   17                   / saved as the start address in location 7777 to jump to when storing or loading completes.
   18                   / It will halt when it starts so you can set the appropriate switches.
   19                   / Press continue to proceed.
   20                   / It has a starting address of 7751 if you want it to halt on start.
   21                   / Start at 7752 run without halting at the start.
   22                   / Note that if a program overwrites this, it won't work. Spacewar will do so.
   23 07751             7751/
   24 07751 760400      go,  hlt
   25 07752 762200           lat
   26 07753 267773           dap adr
   27 07754 027774           and (370000
   28 07755 760020           lia
   29 07756 047775           ior (400000
   30                   / ac has bank and read or write set, io has just the bank.
   31                   / If sense switch 1 is on, save to drum. If off, load from drum.
   32 07757 650010           szs i 10
   33 07760 760060           lsw
   34 07761 720061           dia
   35                   / If we are reading, io now has bank and r/w, ac has just the bank, so we need to swap.
   36                   / If we are writing, we need to swap so io had bank and r/w
   37 07762 760060           lsw
   38 07763 720062           dwc
   39 07764 764000           cli
   40 07765 720063           dcl
   41                   / No busy check because our impl will finish immediately. Won't work on the real drum.
   42                   / Don't autostart on write.
   43 07766 650010           szf i 10
   44 07767 207773           lac adr
   45 07770 640100           sza
   46 07771 617773           jmp i adr
   47 07772 760400           hlt
   48                   
   49 07773 000000      adr, 0
   50                   
   51 07774 370000      constants
      07775 400000
   52       007751      start go

      No errors detected
